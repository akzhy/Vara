Vara=function(t,e,s,i){var r=this;this.elementName=t,this.textsInit=[],"string"==typeof s?this.textsInit.push({text:s}):"object"==typeof s&&(this.textsInit=s),this.texts=this.textsInit,this.properties=i||{},this.properties.textAlign=this.properties.textAlign||"left",this.letterSpacing=0,this.element=document.querySelector(this.elementName),this.fontSource=e,this.characters={},this.drawnCharacters={},this.totalPathLength=0,this.fontSize=24,this.frameRate=1e3/30,this.prevDuration=0,this.completed=!1,this.ready=function(t){r.readyF=t},this.svg=this.createNode("svg",{width:"100%"}),this.element.appendChild(this.svg),this.font=document.createElement("object"),this.getSVGData()},Vara.prototype.createNode=function(t,e){t=document.createElementNS("http://www.w3.org/2000/svg",t);for(var s in e)t.setAttributeNS(null,s.replace(/[A-Z]/g,function(t,e,s,i){return"-"+t.toLowerCase()}),e[s]);return t},Vara.prototype.getSVGData=function(){var t=this,e=new XMLHttpRequest;e.open("GET",this.fontSource,!0),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(t.contents=JSON.parse(e.responseText),t.characters=JSON.parse(e.responseText).c,t.preCreate(),t.createText())},e.send(null)},Vara.prototype.preCreate=function(){!function(){if("function"==typeof NodeList.prototype.forEach)return!1;NodeList.prototype.forEach=Array.prototype.forEach}(),this.questionMark=void 0==this.characters[63]?{paths:[{w:8.643798828125,h:14.231731414794922,my:22.666500004827977,mx:0,pw:28.2464542388916,d:"m 0,0 c -2,-6.01,5,-8.64,8,-3.98,2,4.09,-7,8.57,-7,11.85"},{w:1.103759765625,h:1.549820899963379,my:8.881500004827977,mx:1,pw:4.466640472412109,d:"m 0,0 a 0.7592,0.7357,0,0,1,0,0.735,0.7592,0.7357,0,0,1,-1,-0.735,0.7592,0.7357,0,0,1,1,-0.738,0.7592,0.7357,0,0,1,0,0.738 z"}],w:8.643798828125}:this.characters[63],this.space={paths:[{d:"M0,0 l"+this.contents.p.space+" 0",mx:0,my:0,w:this.contents.p.space,h:0}],w:this.contents.p.space};for(var t=this.analyseWidth(),e=0;e<this.texts.length;e++){for(var s=[],i=("string"==typeof this.texts[e]?{text:this.texts[e]}:this.texts[e]).text,r=0;r<i.length;r++){var o=i[r];if(t.breakPoints[e][r].length>0)for(var a,h=t.breakPoints[e][r].length,n=0;n<=h;n++){var c=t.breakPoints[e][r][n];t.breakPoints[e][r][h-1]!=o.length&&t.breakPoints[e][r].push(o.length);var d=void 0==t.breakPoints[e][r][n-1]?0:t.breakPoints[e][r][n-1];a=o.slice(d,c).replace(/^\s+/g,""),s.push(a)}else s.push(i[r])}this.texts[e].text=s}},Vara.prototype.createText=function(){for(var t,e=this,s=this.svg,i=0,r=0,o=void 0==this.properties.lineHeight?this.contents.p.lh:this.properties.lineHeight,a=0,h=!0,n=0;n<this.texts.length;n++){var c=[],d=0;t=this.texts[n].fontSize;var p=void 0==this.texts[n].strokeWidth?void 0==this.properties.strokeWidth?this.contents.p.bsw:this.properties.strokeWidth:this.texts[n].strokeWidth,l=void 0==this.texts[n].color?void 0==this.properties.color?"black":this.properties.color:this.texts[n].color,x=void 0==this.texts[n].duration?void 0==this.properties.duration?2e3:this.properties.duration:this.texts[n].duration,u=void 0==this.texts[n].id?n:this.texts[n].id;void 0==this.texts[n].fromCurrentPosition&&(this.texts[n].fromCurrentPosition={x:!0,y:!0}),h=void 0==this.texts[n].y||!(void 0!=this.texts[n].fromCurrentPosition.y&&!this.texts[n].fromCurrentPosition.y);var g=l,v=void 0==this.texts[n].textAlign?this.properties.textAlign:this.texts[n].textAlign;o=void 0==this.texts[n].lineHeight?o:this.texts[n].lineHeight/t;var f=this.createNode("g",{transform:"translate(0,0)"});s.appendChild(f),r=a;for(var y=0,m=0;m<this.texts[n].text.length;m++){var w=0,C=this.createNode("g");f.appendChild(C);for(var S=0,k=0,B=0;B<this.texts[n].text[m].length;B++){var b=this.texts[n].text[m][B],P=this.createNode("g");C.appendChild(P);i=0;var A=void 0!=this.characters[b.charCodeAt(0)]||" "==b?" "==b?this.space.paths:this.characters[b.charCodeAt(0)].paths:this.questionMark.paths;l=" "==b?"transparent":g,A.forEach(function(t,s){var i=e.createNode("path",{d:t.d,"stroke-width":p,stroke:l,fill:"none","stroke-linecap":e.contents.p.slc,"stroke-linejoin":e.contents.p.slj});P.appendChild(i),i.setAttribute("transform","translate("+t.mx+","+-t.my+")"),S=S>t.my-i.getBBox().y?S:t.my-i.getBBox().y,0==s&&(k=S),i.style.opacity=0,i.style.strokeDasharray=i.getTotalLength()+" "+(i.getTotalLength()+2),i.style.strokeDashoffset=i.getTotalLength()+1}),c.push(P);i=P.getBBox().x*t;P.getBBox().width<this.texts[n].minWidth&&(i-=(this.texts[n].minWidth-P.getBBox().width)/2),P.setAttribute("transform","translate("+(w-i+this.texts[n].letterSpacing)+",0)  scale("+t+")"),w+=P.getBBox().width*t+this.texts[n].letterSpacing,P.getBBox().width<this.texts[n].minWidth&&(w+=this.texts[n].minWidth-P.getBBox().width)}var N=C.getBBox();C.setAttribute("transform","translate("+p*t+","+(-N.y+p*t)+")");var L=0;"center"==v?L=(this.svg.getBoundingClientRect().width-N.width)/2:"right"==v&&(L=this.svg.getBoundingClientRect().width-N.width),this.setPosition(C,{x:L,y:d+this.contents.p.tf*t-S}),d+=o*t,y+=this.contents.p.tf*t+(this.contents.p.tf*t-k)}void 0!=this.texts[n].y&&1!=this.texts[n].fromCurrentPosition.y||this.setPosition(f,{y:r}),void 0!=this.texts[n].fromCurrentPosition&&this.texts[n].fromCurrentPosition.y&&(a+=void 0==this.texts[n].y?0:this.texts[n].y),this.setPosition(f,{x:this.texts[n].x,y:this.texts[n].y},this.texts[n].fromCurrentPosition),h&&(a+=y),void 0!=this.drawnCharacters[u]&&(u=n),this.drawnCharacters[u]={characters:c,queued:this.texts[n].queued,container:f},(void 0==this.texts[n].autoAnimation||this.texts[n].autoAnimation)&&(e.draw(u,x),(void 0==this.texts[n].queued||this.texts[n].queued)&&(e.prevDuration+=x))}this.completed=!0,this.svg.style.height=this.svg.getBBox().height+this.svg.getBBox().y+10,this.readyF&&this.readyF()},Vara.prototype.draw=function(t,e){var s=this;if(void 0==this.drawnCharacters[t])return console.warn("ID:`"+t+"` not found. Animation skipped"),void console.trace();var i=this.getSectionPathLength(t),r=0,o=void 0==this.drawnCharacters[t].queued||this.drawnCharacters[t].queued?this.prevDuration:1;setTimeout(function(){s.drawnCharacters[t].characters.forEach(function(t){t.querySelectorAll("path").forEach(function(t){var o=t.style.strokeDashoffset/i*e;t.style.opacity=1,s.animate(t,o,r,0),r+=o})})},o)},Vara.prototype.get=function(t){return void 0==this.drawnCharacters[t]?(console.warn("ID:`"+t+"` not found."),console.trace(),!1):this.drawnCharacters[t]},Vara.prototype.animate=function(t,e,s,i){var r=this;i=Number(i)||0,setTimeout(function(){var s=(new Date).getTime(),o=Number(t.style.strokeDashoffset),a=setInterval(function(){var r=Math.min(1,((new Date).getTime()-s)/e);t.style.strokeDashoffset=o+r*(i-o),1==r&&clearInterval(a)},r.frameRate)},s)},Vara.prototype.getSectionPathLength=function(t){var e=this;return this.totalPathLength=0,this.drawnCharacters[t].characters.forEach(function(t){t.querySelectorAll("path").forEach(function(t){e.totalPathLength+=t.getTotalLength()})}),this.totalPathLength},Vara.prototype.analyseWidth=function(){var t=0,e=this.svg.getBoundingClientRect().width,s=[],i=void 0==this.characters[97]?Object.keys(this.characters)[Math.round(Math.random()*this.characters.length)]:"97",r=document.createElement("span");this.element.appendChild(r),r.style.opacity=0,r.style.position="absolute",r.innerHTML=String.fromCharCode(i);var o=document.createElement("span");this.element.appendChild(o),o.style.opacity=0,o.style.position="absolute",o.innerHTML=" . ";for(var a=0;a<this.texts.length;a++){var h,n=this.texts[a];h="string"==typeof n.text?[n.text]:n.text,this.texts[a].text=h,this.texts[a].letterSpacing=void 0==this.texts[a].letterSpacing?void 0==this.properties.letterSpacing?0:this.properties.letterSpacing:this.texts[a].letterSpacing;var c=void 0==this.texts[a].breakWord?void 0!=this.properties.breakWord&&this.properties.breakWord:this.texts[a].breakWord,d=void 0==n.fontSize?void 0==this.properties.fontSize?this.fontSize:this.properties.fontSize:n.fontSize;r.style.fontSize=d+"px",o.style.fontSize=d+"px";var p=r.getBoundingClientRect().width/this.characters[i].w;this.texts[a].minWidth=o.getBoundingClientRect().width;var l,x=void 0==this.texts[a].width?e+15:this.texts[a].width,u=[],g=void 0==this.texts[a].x?0:this.texts[a].x;this.trueFontSize=d,this.texts[a].fontSize=p;for(var v=0;v<h.length;v++){for(var f=g,y=[],m=h[v],w=0;w<m.length;w++){if(f+(l=void 0!=this.characters[m[w].charCodeAt(0)]?this.characters[m[w].charCodeAt(0)].w*p+this.texts[a].letterSpacing:" "==m[w]?this.space.w*p:this.questionMark.w*p+this.texts[a].letterSpacing)>x){l>x&&(c=!0);var C=w;" "==m[w]||c||(C=m.slice(0,C+1).search(/\S+$/)),y.push(C),f=l}t+=l,f+=l}u.push(y)}s.push(u)}return r.parentNode.removeChild(r),o.parentNode.removeChild(o),{width:t,breakPoints:s}},Vara.prototype.setPosition=function(t,e,s){(s=void 0==s?{x:!1,y:!1}:s).x=void 0!=s.x&&s.x,s.y=void 0!=s.y&&s.y;var i=t.transform.baseVal.consolidate().matrix,r=i.e,o=i.f;void 0!=e.x&&(s.x?r+=e.x:r=e.x),void 0!=e.y&&(s.y?o+=e.y:o=e.y-t.getBBox().y),t.transform.baseVal.consolidate().setTranslate(r,o)};